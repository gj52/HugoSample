{
  "version"      : "https://jsonfeed.org/version/1",
  {{ $t := ( print site.Title " JSON" ) }}"title"        : {{ $t | jsonify }},
  "home_page_url": {{ site.BaseURL  | absURL | jsonify }},
  {{ with .OutputFormats.Get "JSON" }}"feed_url"     : {{.Permalink | absURL | jsonify }},{{ end }} 
  {{ $icon := resources.Get "img/yy512.png" }}"icon"         : "{{$icon.Permalink}}",
  {{ $favicon := resources.Get "img/yy.ico" }}"favicon"      : "{{$favicon.Permalink}}",
  {{ with site.Author.name         }}"author"       : 
  {
    "name"       : {{ . | jsonify }},
    "avatar"     : {{ site.Params.sidebar.avatar | absURL | jsonify }}
  },  {{ end }}
  "items": {{ $r := first site.Params.feedSize (where site.RegularPages.ByDate.Reverse "Section" "not in" site.Params.invisibleSections)}} {{ $lr := len $r }} {{ $ir := 1}} 
  [{{ range $r}}
    {
      "id"            : {{ $uuid := sha1 (.Permalink  | absURL)}}"{{substr $uuid 0 8}}-{{substr $uuid 8 4}}-5{{substr $uuid 13 3}}-{{substr $uuid 16 1}}9{{substr $uuid 17 2}}-{{substr $uuid 21 12}}",
      "url"           : {{ .Permalink | jsonify  }},
      "title"         : {{ .Title   | plainify | chomp | jsonify }},
      "summary"       : {{ .Summary | plainify | chomp | jsonify }},{{ range first 1 (.Resources.ByType "image") -}}{{ $original := . }}{{ $.Scratch.Set "image" ($original.Fit "480x480 #ffffff q75") }}{{ $image := $.Scratch.Get "image" }}
      "banner_image"  : "{{ $image.Permalink }}",{{- end }}
      "date_published": {{ .PublishDate.UTC.Format site.Params.dateFormatFeed | jsonify  }},
      "date_modified" : {{ .Lastmod.UTC.Format site.Params.dateFormatFeed | jsonify  }},
      {{with .Params -}}{{with .Params.tags -}}{{ $lt := len .Params.tags }}{{ $it := 1}}
	  "tags"          : [{{ range .Params.tags }}"{{ . }}"{{ if lt $it $lt }},{{ end }}{{ $it = add $it 1}}{{ end }}]
	  {{- end}}{{- end}}
    }{{ if lt $ir $lr }},{{ end }}{{ $ir = add $ir 1}}{{ end }}
  ]
}
 