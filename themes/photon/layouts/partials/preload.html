{{ $tachions  := resources.Get "css/tachyons.css" }}
{{ $colors    := resources.Get "css/colors.css" }} 
{{ $maincss   := resources.Get "css/main.css" }}
{{ $fonta     := resources.Get "css/awesome.css" }}
{{ $print     := resources.Get "css/print.css" }}
{{ $fancy     := resources.Get "css/jquery.fancybox.css" }}

{{ $jq    := resources.Get "js/jquery-3.6.0.slim.js" }}
{{ $fb    := resources.Get "js/jquery.fancybox.js"  }}
{{ $osd   := resources.Get "js/openseadragon.js" }}

{{if hugo.IsProduction }}
    {{ $tachions  = $tachions | minify | fingerprint site.Params.digest }}
    {{ $colors    = $colors   | minify | fingerprint site.Params.digest }} 
    {{ $maincss   = $maincss  | minify | fingerprint site.Params.digest }}
    {{ $fonta     = $fonta    | minify | fingerprint site.Params.digest }}
    {{ $print     = $print    | minify | fingerprint site.Params.digest }}
    {{ $jq    = $jq    | minify | fingerprint site.Params.digest }} 
    {{ $fb    = $fb    | minify | fingerprint site.Params.digest }}
    {{ $osd   = $osd   | minify | fingerprint site.Params.digest }}
{{end}}

<script async src={{ $jq.RelPermalink }} crossorigin=anonymous integrity={{ $jq.Data.Integrity }} ></script>

<link rel=preload href=/img/wave-ms.jpg as=image type=image/jpeg crossorigin=anonymous
    media="screen and (min-width: 30em) and (max-width: 60em) and (prefers-color-scheme: light)" >
<link rel=preload href=/img/wave-ls.jpg as=image type=image/jpeg crossorigin=anonymous
    media="screen and (min-width: 60em) and (prefers-color-scheme: light)">
<link rel=preload href=/img/darkwave-ms.jpg as=image type=image/jpeg crossorigin=anonymous
    media="screen and (min-width: 30em) and (max-width: 60em) and (prefers-color-scheme: dark)" >
<link rel=preload href=/img/darkwave-ls.jpg as=image type=image/jpeg crossorigin=anonymous
    media="screen and (min-width: 60em) and (prefers-color-scheme: dark)">

<link rel=preload  onload="this.rel = 'stylesheet'" href={{ $tachions.RelPermalink  }} as=style crossorigin=anonymous integrity={{ $tachions.Data.Integrity }} >
<link rel=preload  onload="this.rel = 'stylesheet'" href={{ $colors.RelPermalink    }} as=style crossorigin=anonymous integrity={{ $colors.Data.Integrity   }} >
<link rel=preload  onload="this.rel = 'stylesheet'" href={{ $maincss.RelPermalink   }} as=style crossorigin=anonymous integrity={{ $maincss.Data.Integrity  }} >
<link rel=preload  onload="this.rel = 'stylesheet'" href={{ $fonta.RelPermalink     }} as=style crossorigin=anonymous integrity={{ $fonta.Data.Integrity    }} >
<link rel=preload  onload="this.rel = 'stylesheet'" href={{ $print.RelPermalink     }} as=style crossorigin=anonymous media=print integrity={{ $print.Data.Integrity    }} >

<link rel=preload href=/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous >
<link rel=preload href=/webfonts/fa-solid-900.woff2   as=font type=font/woff2 crossorigin=anonymous >

{{ if eq .Params.Layout "gallery" }}
    <link rel=prefetch onload="this.rel = 'stylesheet'" as=style href={{ $fancy.RelPermalink }} crossorigin=anonymous integrity={{ $fancy.Data.Integrity }} />
    <link rel=preload as=script href={{ $fb.RelPermalink }}  crossorigin=anonymous integrity={{ $fb.Data.Integrity }} />
{{end}}
{{ if eq .Params.Layout "panorama" }}
    <link rel=preload as=script href={{ $osd.RelPermalink }}  crossorigin=anonymous integrity={{ $osd.Data.Integrity }} />
{{end}}
{{ if .HasShortcode "tex" }}
    <link rel=preload as=script href=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js crossorigin=anonymous />
{{end}}

